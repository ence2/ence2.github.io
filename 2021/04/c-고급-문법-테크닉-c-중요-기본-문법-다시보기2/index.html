<!DOCTYPE html>
<html lang="ko-kr">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.92.0 with theme Tranquilpeak 0.4.8-BETA">
<meta name="author" content="Developing life">
<meta name="keywords" content="tech, developer, 개발자, programmer, programming, software, 프로그래머, coding, 코딩, server, development, developer, 프로그래머, 개발자, 프로그래밍">
<meta name="description" content="C&#43;&#43; 버전과 역사에 대해서 알아보고, 기본 문법의 This call, New, Name mangling, Conversion 등에 대해 알아보겠습니다.">


<meta property="og:description" content="C&#43;&#43; 버전과 역사에 대해서 알아보고, 기본 문법의 This call, New, Name mangling, Conversion 등에 대해 알아보겠습니다.">
<meta property="og:type" content="article">
<meta property="og:title" content="C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 중요 기본 문법 다시보기[2]">
<meta name="twitter:title" content="C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 중요 기본 문법 다시보기[2]">
<meta property="og:url" content="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
<meta property="twitter:url" content="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
<meta property="og:site_name" content="Keep calm carry on">
<meta property="og:description" content="C&#43;&#43; 버전과 역사에 대해서 알아보고, 기본 문법의 This call, New, Name mangling, Conversion 등에 대해 알아보겠습니다.">
<meta name="twitter:description" content="C&#43;&#43; 버전과 역사에 대해서 알아보고, 기본 문법의 This call, New, Name mangling, Conversion 등에 대해 알아보겠습니다.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2021-04-15T10:50:00">
  
  
    <meta property="article:modified_time" content="2021-04-15T10:50:00">
  
  
  
    
      <meta property="article:section" content="Language">
    
      <meta property="article:section" content="C&#43;&#43;">
    
  
  
    
      <meta property="article:tag" content="C&#43;&#43;">
    
      <meta property="article:tag" content="Modern C&#43;&#43;">
    
      <meta property="article:tag" content="C&#43;&#43; Advanced">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://avatars1.githubusercontent.com/u/53330253?s=460&u=0f3d9c64f695413f8d31da697df4b8e2f77a2ef1&v=4">
  <meta property="twitter:image" content="https://avatars1.githubusercontent.com/u/53330253?s=460&u=0f3d9c64f695413f8d31da697df4b8e2f77a2ef1&v=4">


    <title>C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 중요 기본 문법 다시보기[2]</title>

    <link rel="icon" href="https://ence2.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://ence2.github.io/css/style-3vvhladpcoxxi5xtg919g4jomaw4to5kaduclr4dto0uo6rhcutwzy9zd.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-183004637-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2434286165145936"
     crossorigin="anonymous"></script>
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://ence2.github.io/">Keep calm carry on</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://ence2.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://avatars1.githubusercontent.com/u/53330253?s=460&amp;u=0f3d9c64f695413f8d31da697df4b8e2f77a2ef1&amp;v=4" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://ence2.github.io/#about">
          <img class="sidebar-profile-picture" src="https://avatars1.githubusercontent.com/u/53330253?s=460&amp;u=0f3d9c64f695413f8d31da697df4b8e2f77a2ef1&amp;v=4" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Developing life</h4>
        
          <h5 class="sidebar-profile-bio">다시 보기 위한 공간입니다.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ence2.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link open-algolia-search" href="https://ence2.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-search"></i>
      
      <span class="sidebar-button-desc">Search</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ence2.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/ence2" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.instagram.com/svr.dev/" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-instagram"></i>
      
      <span class="sidebar-button-desc">Instagram</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ence2.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 중요 기본 문법 다시보기[2]
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2021-04-15T10:50:00&#43;09:00">
        
  April 15, 2021

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://ence2.github.io/categories/language">Language</a>, 
    
      <a class="category-link" href="https://ence2.github.io/categories/c&#43;&#43;">C&#43;&#43;</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>C++ 버전과 역사에 대해서 알아보고, 기본 문법의 This call, New, Name mangling, Conversion 등에 대해 알아보겠습니다.</p>
<h3 id="about-c">About C++</h3>
<ul>
<li><a href="http://www.isocpp.org">www.isocpp.org</a> : cpp 표준에서 운영하는 사이트</li>
<li>표준 cpp 발전 흐름 : C++98/04 -&gt; C++11 -&gt; C++14 -&gt; C++17 -&gt; C++20</li>
</ul>
<p><img src="https://isocpp.org/files/img/wg21-timeline-2019-07.png" alt=""></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2434286165145936"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-2434286165145936"
     data-ad-slot="3616975529"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3 id="this-call">This call</h3>
<ul>
<li>
<p>멤버함수의 호출원리</p>
<ul>
<li>멤버 함수는 1번째 인자로 객체의 주소(this) 가 암시적으로 추가된다. ( 개발자는 볼 수 없음 )</li>
<li>전달되는 객체의 주소는 ecx 레지스터로 전달</li>
<li>static 멤버 함수는 인자로 객체의 주소(this) 가 추가되지 않는다. 그리하여 static 멤버 함수는 멤버 변수에 접근 할 수 없는 오류가 발생하는 것(this가 없기 때문 but 우회하는 트릭이 있음)</li>
<li>멤버 함수에 this가 암시적으로 전달 되는 것을 this call이라고 함.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">void</span> set(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#75715e">// void set(Point* const this, int a, int b)
</span><span style="color:#75715e"></span>	{
		x <span style="color:#f92672">=</span> a;	<span style="color:#75715e">// this-&gt;x = a;
</span><span style="color:#75715e"></span>		y <span style="color:#f92672">=</span> b;	<span style="color:#75715e">// this-&gt;y = b;
</span><span style="color:#75715e"></span>	}
	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">int</span> a) <span style="color:#75715e">// void foo( int a)
</span><span style="color:#75715e"></span>	{
		x <span style="color:#f92672">=</span> a;				<span style="color:#75715e">// this-&gt;x = a;   변경해야 하는데.. this 가 없다. error
</span><span style="color:#75715e"></span>	}
};
<span style="color:#75715e">// cl this1.cpp /FAs  =&gt; this1.asm
</span><span style="color:#75715e">// g++ this1.cpp -S   =&gt; this1.s
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Point<span style="color:#f92672">::</span>foo(<span style="color:#ae81ff">10</span>); <span style="color:#75715e">// push 10
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// call Point::foo
</span><span style="color:#75715e"></span>
	Point p1;
	Point p2;

	<span style="color:#75715e">// this call
</span><span style="color:#75715e"></span>	p1.set(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>);	<span style="color:#75715e">// set(&amp;p1, 10, 20)
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// push 20
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// push 10
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// lea  ecx, &amp;p1    rcx, &amp;p1 // 객체 주소는 레지스터로
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// call Point::set
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>멤버함수 포인터</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// 핵심 1. 일반 함수 포인터에 멤버함수의 주소를 담을수 없다.
</span><span style="color:#75715e">// 핵심 2. 일반 함수 포인터에 static 멤버함수의 주소를 담을수 있다.
</span><span style="color:#75715e">// 핵심 3. 멤버 함수 포인터 모양과 사용법.  .*   (p-&gt;*f3)()
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Dialog</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">void</span> Close() {}
};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>() {}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">void</span>(<span style="color:#f92672">*</span>f1)() <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>foo;
	f1();

<span style="color:#75715e">//	void(*f2)() = &amp;Dialog::Close; // error. this 가 추가되는 함수.
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">void</span>(Dialog<span style="color:#f92672">::*</span>f3)() <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>Dialog<span style="color:#f92672">::</span>Close; <span style="color:#75715e">// ok.. 멤버 함수 포인터.
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//f3(); // error. 객체(this)가 없다.
</span><span style="color:#75715e"></span>
	Dialog dlg;
	<span style="color:#75715e">//dlg.f3(); // dlg.Close()의 의미.. 하지만..f3이라는 멤버를 찾게된다.- error
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//dlg.*f3(); // &#34;.*&#34; : pointer to member operator
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// error. 연산자 우선순위 문제..
</span><span style="color:#75715e"></span>
	(dlg.<span style="color:#f92672">*</span>f3)(); <span style="color:#75715e">// ok.. dlg.Close();	
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>예제 1 - Thread 클래스 만들기</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;windows.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#75715e">// 라이브러리 내부 클래스
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Thread</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>

	<span style="color:#66d9ef">void</span> run()
	{
		CreateThread(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, threadMain,(<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span>)<span style="color:#66d9ef">this</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
	}

	<span style="color:#75715e">// 1. 아래 함수는 반드시 static 함수 이어야 합니다.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// 2. 아래 함수는 this가 없다. 그래서 함수 인자로
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//    this를 전달하는 기술.
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">static</span> DWORD <span style="color:#66d9ef">__stdcall</span> <span style="color:#a6e22e">threadMain</span>(<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> p)
	{
		Thread<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> self <span style="color:#f92672">=</span> <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span>Thread<span style="color:#f92672">*&gt;</span>(p);

		self<span style="color:#f92672">-&gt;</span>Main(); <span style="color:#75715e">// Main( self )
</span><span style="color:#75715e"></span>
		<span style="color:#75715e">//Main(); // 가상함수 호출
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// this-&gt;Main() =&gt; Main( this) 로 변해야 한다.
</span><span style="color:#75715e"></span>
		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
	}

	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Main</span>() <span style="color:#75715e">// void Main(Thread* const this)
</span><span style="color:#75715e"></span>	{}
};

<span style="color:#75715e">// 라이브러리 사용자 코드
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyThread</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Thread
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Main() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;스레드 작업&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	MyThread t;
	t.run();	<span style="color:#75715e">// 이순간 스레드가 생성되어서 
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// 가상함수 Main()을 실행해야 합니다.
</span><span style="color:#75715e"></span>	getchar();
}
</code></pre></div></li>
<li>
<p>예제 2 - 타이머 개념을 사용해서 Clock 클래스 만들기</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;map&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Clock</span>
{
	<span style="color:#66d9ef">static</span> map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, Clock<span style="color:#f92672">*&gt;</span> this_map;
	string name;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Clock(string n) <span style="color:#f92672">:</span> name(n) {}

	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">start</span>(<span style="color:#66d9ef">int</span> ms)
	{
		<span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> set_timer(ms, timerHandler );

		this_map[id] <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>;
	}

	<span style="color:#75715e">// 핵심 1. 아래 함수는 반드시 static 멤버 이어야 합니다.
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 인자가 1개 필요한데(id) non static 멤버 함수는 this가 암시적으로 전달 되기 때문
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">timerHandler</span>(<span style="color:#66d9ef">int</span> id)
	{
		Clock<span style="color:#f92672">*</span> <span style="color:#66d9ef">const</span> self <span style="color:#f92672">=</span> this_map[id];

		<span style="color:#75715e">//cout &lt;&lt; name &lt;&lt; endl;	// this-&gt;name
</span><span style="color:#75715e"></span>		cout <span style="color:#f92672">&lt;&lt;</span> self<span style="color:#f92672">-&gt;</span>name <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};

map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, Clock<span style="color:#f92672">*&gt;</span> Clock<span style="color:#f92672">::</span>this_map;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Clock c1(<span style="color:#e6db74">&#34;A&#34;</span>);
	Clock c2(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">B&#34;</span>);

	c1.start(<span style="color:#ae81ff">1000</span>); <span style="color:#75715e">// 1000ms 에 한번씩 이름출력
</span><span style="color:#75715e"></span>	c2.start(<span style="color:#ae81ff">500</span>);  <span style="color:#75715e">// 500ms 에 한번씩 이름출력
</span><span style="color:#75715e"></span>
	process_message();
}
</code></pre></div></li>
<li>
<p>다중 상속과 this</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>
{
	<span style="color:#66d9ef">int</span> a;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">void</span> fa() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">this</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">B</span>
{
	<span style="color:#66d9ef">int</span> b;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">void</span> fb() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">this</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">C</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> A, <span style="color:#66d9ef">public</span> B
{
	<span style="color:#66d9ef">int</span> c;
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	C obj;
	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">&amp;</span>obj <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 1000
</span><span style="color:#75715e"></span>
	A<span style="color:#f92672">*</span> pA <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>obj;
	B<span style="color:#f92672">*</span> pB <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>obj; <span style="color:#75715e">// &amp;obj + sizeof(A)
</span><span style="color:#75715e"></span>
    obj.fa(); <span style="color:#75715e">// fa(&amp;obj)   cout &lt;&lt; this =&gt; 1000
</span><span style="color:#75715e"></span>	obj.fb(); <span style="color:#75715e">// fb(&amp;obj + sizeof(A)) cout &lt;&lt; this =&gt; 1004
</span><span style="color:#75715e"></span>
	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#f92672">&amp;</span>obj <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 1000 
</span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> pA   <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 1000
</span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> pB   <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 1004
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">void</span> (C<span style="color:#f92672">::*</span>f)(); <span style="color:#75715e">// 멤버 함수 포인터 ( 크기가 다중상속 일 때 커질 수 있음 )
</span><span style="color:#75715e"></span>
	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">sizeof</span>(f) <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 32bit 환경에서 8
</span><span style="color:#75715e"></span>
	f <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>C<span style="color:#f92672">::</span>fa; <span style="color:#75715e">// f = { fa 주소, 0  };
</span><span style="color:#75715e"></span>	f <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>C<span style="color:#f92672">::</span>fb; <span style="color:#75715e">// f = { fb 주소, sizeof(A)};
</span><span style="color:#75715e"></span>
	(obj.<span style="color:#f92672">*</span>f)(); <span style="color:#75715e">// f.함수주소( &amp;obj + f.this offset )
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>멤버 변수 포인터</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">int</span> x, y;
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">int</span>   n <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
	<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>n;

	<span style="color:#75715e">//void(Point::*f)() = &amp;Point::print; // 멤버 함수 포인터
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">int</span> Point<span style="color:#f92672">::*</span>p2 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>Point<span style="color:#f92672">::</span>x; <span style="color:#75715e">// 멤버 변수 포인터
</span><span style="color:#75715e"></span>							    <span style="color:#75715e">// 0
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> Point<span style="color:#f92672">::*</span>p3 <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>Point<span style="color:#f92672">::</span>y; <span style="color:#75715e">// 4
</span><span style="color:#75715e"></span>								<span style="color:#75715e">// C의 offset_of
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//cout &lt;&lt; p3 &lt;&lt; endl;
</span><span style="color:#75715e"></span>	printf(<span style="color:#e6db74">&#34;%d, %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, p2, p3);

	Point pt;

	pt.y <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
	pt.<span style="color:#f92672">*</span>p3 <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>;

	cout <span style="color:#f92672">&lt;&lt;</span> pt.y <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 20
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
</ul>
<h3 id="const-member-function">Const Member Function</h3>
<ul>
<li>
<p>상수 멤버 함수의 필요성 : 변수 값을 변경하지 않는 모든 &ldquo;멤버 함수&quot;는 &ldquo;상수 멤버함수&quot;를 권장</p>
<ol>
<li>
<p>const 객체를 사용하는 코드에서 대상의 구현이 .h와 .cpp로 나눠져 있을 때 .h 파일만 include 하여도 상수 멤버 함수 속성을 통해 에러를 발생시킬 지 판단 가능</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">int</span> x, y;

	Point(<span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">:</span> x(a), y(b) {}

	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">set</span>(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) 
	{
		x <span style="color:#f92672">=</span> a; 
		y <span style="color:#f92672">=</span> b; 
	}
	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print</span>()  <span style="color:#75715e">//const	// const를 붙이면 상수 멤버 함수
</span><span style="color:#75715e"></span>	{
	<span style="color:#75715e">//	x = 10;	// error. 모든 멤버를 상수 취급한다.
</span><span style="color:#75715e"></span>
		cout <span style="color:#f92672">&lt;&lt;</span> x <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;, &#34;</span> <span style="color:#f92672">&lt;&lt;</span> y <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">const</span> Point p(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);

	p.x <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;		<span style="color:#75715e">// error
</span><span style="color:#75715e"></span>	p.set(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">20</span>);	<span style="color:#75715e">// error
</span><span style="color:#75715e"></span>	p.print();		<span style="color:#75715e">// ok or error.
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>상수 객체는 상수 멤버 함수만 호출 가능</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// 객체의 상태를 변경하지 않은 모든 멤버함수는(getxxx)
</span><span style="color:#75715e">// 반드시 const 멤버 함수가 되어야 한다.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Rect</span>
{
	<span style="color:#66d9ef">int</span> ox, oy, width, height;

	Rect(<span style="color:#66d9ef">int</span> x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> w <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> h <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) 
		<span style="color:#f92672">:</span> ox(x), oy(y), width(w), height(h) {}

	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getArea</span>() <span style="color:#66d9ef">const</span> {	<span style="color:#66d9ef">return</span> width <span style="color:#f92672">*</span> height; }
};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(  <span style="color:#66d9ef">const</span> Rect<span style="color:#f92672">&amp;</span> r) <span style="color:#75715e">// call by value 보다는 const &amp; 가 좋다.
</span><span style="color:#75715e"></span>{
	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> r.getArea(); <span style="color:#75715e">// error.
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Rect r(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>);

	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> r.getArea(); <span style="color:#75715e">// ok.
</span><span style="color:#75715e"></span>
	foo(r);
}
</code></pre></div></li>
</ol>
</li>
<li>
<p>논리적 상수성 : 상수 멤버 함수에서 변할 수 있는 대상을 지정 할 수 있음</p>
<ol>
<li>mutable 키워드 사용</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;

	<span style="color:#75715e">// mutable  멤버 변수 : 상수멤버함수 안에서도 값을 변경가능.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">mutable</span> <span style="color:#66d9ef">char</span> cache[<span style="color:#ae81ff">16</span>];
	<span style="color:#66d9ef">mutable</span> <span style="color:#66d9ef">bool</span> cache_valid <span style="color:#f92672">=</span> false;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point(<span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">:</span> x(a), y(b) {}

	<span style="color:#75715e">// 캐싱된 값을 사용하는 상수 멤버함수 toString 구현
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">toString</span>() <span style="color:#66d9ef">const</span>
	{
		<span style="color:#66d9ef">if</span> (cache_valid <span style="color:#f92672">==</span> false)
		{
			sprintf(cache, <span style="color:#e6db74">&#34;%d, %d&#34;</span>, x, y);
			cache_valid <span style="color:#f92672">=</span> true;
		}
		<span style="color:#66d9ef">return</span> cache;
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Point p1(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);

	cout <span style="color:#f92672">&lt;&lt;</span> p1.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
	cout <span style="color:#f92672">&lt;&lt;</span> p1.toString() <span style="color:#f92672">&lt;&lt;</span> endl;

}
</code></pre></div><ol start="2">
<li>데이터 객체 포인터 사용</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Cache</span>
{
	<span style="color:#66d9ef">char</span> cache[<span style="color:#ae81ff">16</span>];
	<span style="color:#66d9ef">bool</span> cache_valid <span style="color:#f92672">=</span> false;
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
	Cache<span style="color:#f92672">*</span> pCache;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point(<span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>) <span style="color:#f92672">:</span> x(a), y(b) 
	{
		pCache <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Cache;
	}

	<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> <span style="color:#a6e22e">toString</span>() <span style="color:#66d9ef">const</span>
	{
		<span style="color:#66d9ef">if</span> (pCache<span style="color:#f92672">-&gt;</span>cache_valid <span style="color:#f92672">==</span> false)
		{
			sprintf(pCache<span style="color:#f92672">-&gt;</span>cache, <span style="color:#e6db74">&#34;%d, %d&#34;</span>, x, y);
			pCache<span style="color:#f92672">-&gt;</span>cache_valid <span style="color:#f92672">=</span> true;
		}
		<span style="color:#66d9ef">return</span> pCache<span style="color:#f92672">-&gt;</span>cache;
	}
	<span style="color:#f92672">~</span>Point() { <span style="color:#66d9ef">delete</span> pCache; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Point p1(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);

	cout <span style="color:#f92672">&lt;&lt;</span> p1.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
	cout <span style="color:#f92672">&lt;&lt;</span> p1.toString() <span style="color:#f92672">&lt;&lt;</span> endl;
}
</code></pre></div></li>
</ul>
<h3 id="new">New</h3>
<ul>
<li>
<p>new vs operator new</p>
<ul>
<li>new : 메모리 할당 + 생성자 호출</li>
<li>operator new : 메모리만 할당</li>
<li>delete도 같은 방식으로 동작(소멸자 관련)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point()  { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Point()&#34;</span>  <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Point() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~Point()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#75715e">/*
</span><span style="color:#75715e">	// malloc : 메모리만 할당
</span><span style="color:#75715e">	Point* p1 = (Point*)malloc(sizeof(Point));
</span><span style="color:#75715e">	free(p1);
</span><span style="color:#75715e">	// new : 메모리 할당 + 생성자 호출
</span><span style="color:#75715e">	Point* p2 = new Point;	
</span><span style="color:#75715e">	delete p2;									
</span><span style="color:#75715e">	*/</span>

	Point<span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">*&gt;</span>(
				<span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">new</span>(<span style="color:#66d9ef">sizeof</span>(Point)));

	<span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">delete</span>(p1);
}
</code></pre></div></li>
<li>
<p>placement new : 생성자를 호출하기 위해 표준에서 만든 new</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point()  { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Point()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Point() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~Point()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#75715e">/* cpp 표준에서 생성자를 호출하는 표현
</span><span style="color:#75715e">void* operator new(size_t sz, void* p)
</span><span style="color:#75715e">{
</span><span style="color:#75715e">	return p;
</span><span style="color:#75715e">}
</span><span style="color:#75715e">*/</span>

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Point p;	

	<span style="color:#75715e">//new Point; // 인자가 1개인 operator new()호출.
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">new</span>(<span style="color:#f92672">&amp;</span>p) Point; <span style="color:#75715e">// 인자가 2개인 operator new()호출.
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// 메모리 할당이 아닌 생성자를
</span><span style="color:#75715e"></span>					<span style="color:#75715e">// 명시적으로 호출하는 코드
</span><span style="color:#75715e"></span>	p.<span style="color:#f92672">~</span>Point(); 
}
</code></pre></div></li>
<li>
<p>생성자(소멸자)의 명시적 호출이 필요한 이유</p>
<ul>
<li>객체를 힙에 10개 만들 때 (활용 -&gt; stl의 vector 생성시)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#f92672">:</span> x(a), y(b) 
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Point(int, int)&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	} 
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#75715e">// Point 객체를 힙에 한개 만들고 싶다.
</span><span style="color:#75715e"></span>	Point<span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Point(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>); <span style="color:#75715e">// ok.
</span><span style="color:#75715e"></span>

	<span style="color:#75715e">// Point 객체를 힙에 10개 만들고 싶다.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//Point* p2 = new Point[10]; // error.
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// 1. 메모리만 먼저 힙에 할당
</span><span style="color:#75715e"></span>	Point<span style="color:#f92672">*</span> p2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">*&gt;</span>(<span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">new</span>(<span style="color:#66d9ef">sizeof</span>(Point) <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>));

	<span style="color:#75715e">// 2. 할당한 메모리에 객체를 생성(생성자 호출)
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; i<span style="color:#f92672">++</span>)
		<span style="color:#66d9ef">new</span>(<span style="color:#f92672">&amp;</span>p2[i]) Point(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>);


	<span style="color:#75715e">// 3. 소멸자 호출
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>; i <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>; i<span style="color:#f92672">--</span>)
		p2[i].<span style="color:#f92672">~</span>Point();

	<span style="color:#75715e">// 4. 메모리 해지.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">delete</span>(p2);

    <span style="color:#75715e">// 활용 stl vector
</span><span style="color:#75715e"></span>	vector<span style="color:#f92672">&lt;</span>Point<span style="color:#f92672">&gt;</span> v(<span style="color:#ae81ff">10</span>, Point(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>));
}
</code></pre></div><ul>
<li>stl의 vector 관련 추가 설명 -&gt; 소멸자의 명시적 호출이 필요 한 케이스</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> v(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">0</span>);
	v.resize(<span style="color:#ae81ff">7</span>);
	cout <span style="color:#f92672">&lt;&lt;</span> v.size() <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 7
</span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> v.capacity() <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 10
</span><span style="color:#75715e"></span>

	<span style="color:#75715e">// DBConnect : 생성자에서 DB 접속을 한다고 가정
</span><span style="color:#75715e"></span>	vector<span style="color:#f92672">&lt;</span>DBConnect<span style="color:#f92672">&gt;</span> v2(<span style="color:#ae81ff">10</span>);

	v2.resize(<span style="color:#ae81ff">7</span>); <span style="color:#75715e">// 메모리는 제거하지 않지만
</span><span style="color:#75715e"></span>				  <span style="color:#75715e">// 줄어든 객체의 소멸자는 호출해야한다
</span><span style="color:#75715e"></span>
	v2.resize(<span style="color:#ae81ff">8</span>); <span style="color:#75715e">// 새로운 객체에 대한 메모리는 있다
</span><span style="color:#75715e"></span>				  <span style="color:#75715e">// 하지만 생성자를 호출해서
</span><span style="color:#75715e"></span>				  <span style="color:#75715e">// 다시 DB 접속을 해야 한다.
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
</ul>
<h3 id="name-mangling">Name mangling</h3>
<p>컴파일러가 심볼의 이름을 변경하는 현상</p>
<ul>
<li>
<p>name mangling : 함수 오버로딩, namespace, template</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">int</span> n)		<span style="color:#75715e">// 어셈블리 함수 이름 : squarei()
</span><span style="color:#75715e"></span>{
	<span style="color:#66d9ef">return</span> n <span style="color:#f92672">*</span> n;
}

<span style="color:#66d9ef">double</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">double</span> d)	<span style="color:#75715e">// squared()
</span><span style="color:#75715e"></span>{
	<span style="color:#66d9ef">return</span> d <span style="color:#f92672">*</span> d;
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	square(<span style="color:#ae81ff">3</span>);		<span style="color:#75715e">// squarei(3)
</span><span style="color:#75715e"></span>	square(<span style="color:#ae81ff">3.3</span>);	<span style="color:#75715e">// squared(3.3)
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>extern &ldquo;C&rdquo; : C 컴파일러에서는 name mangling 규칙이 적용되지 않아 c 파일을 c++ 컴파일러에서 사용시 링킹 오류를 막기 위한 방법</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// 함수 선언 헤더 파일에서 __cplusplus와 exten &#34;C&#34;를 조합해서 사용
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// square.h
</span><span style="color:#75715e">//extern &#34;C&#34; // C++ 컴파일러에게 C 처럼 해석해 달라.
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#ifdef __cplusplus
</span><span style="color:#75715e"></span><span style="color:#66d9ef">extern</span> <span style="color:#e6db74">&#34;C&#34;</span> {
<span style="color:#75715e">#endif
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">int</span>);

<span style="color:#75715e">#ifdef __cplusplus
</span><span style="color:#75715e"></span>}
<span style="color:#75715e">#endif
</span></code></pre></div></li>
<li>
<p>같은 이름의 함수와 함수주소</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdio&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">int</span> n)
{
	<span style="color:#66d9ef">return</span> n <span style="color:#f92672">*</span> n;
}
<span style="color:#66d9ef">double</span> <span style="color:#a6e22e">square</span>(<span style="color:#66d9ef">double</span> d)	
{
	<span style="color:#66d9ef">return</span> d <span style="color:#f92672">*</span> d;
}
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">int</span> a) 
{
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#75715e">//printf(&#34;%p\n&#34;, &amp;square); // error
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//printf(&#34;%p\n&#34;, static_cast&lt;int(*)(int)&gt;(&amp;square)); // ok.
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//auto p = &amp;square; // error
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">int</span>(<span style="color:#f92672">*</span>f)(<span style="color:#66d9ef">int</span>) <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>square; <span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">void</span>(<span style="color:#f92672">*</span>f1)(<span style="color:#66d9ef">int</span>) <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>foo; <span style="color:#75715e">// ok. 함수 주소 꺼내기
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span>(<span style="color:#f92672">*</span>f2)(<span style="color:#66d9ef">int</span>) <span style="color:#f92672">=</span> foo;  <span style="color:#75715e">// 함수 이름은 함수 주소로 암시적 형변환
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">void</span>(<span style="color:#f92672">*</span>PF)(<span style="color:#66d9ef">int</span>); <span style="color:#75715e">// 함수 포인터 타입
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">void</span> F(<span style="color:#66d9ef">int</span>);    <span style="color:#75715e">// 함수 타입..
</span><span style="color:#75715e"></span>
	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">typeid</span>(<span style="color:#f92672">&amp;</span>foo).name() <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// void(*)(int)
</span><span style="color:#75715e"></span>	cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#66d9ef">typeid</span>(foo).name() <span style="color:#f92672">&lt;&lt;</span> endl;  <span style="color:#75715e">// void(int)
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
</ul>
<h3 id="constructor">Constructor</h3>
<ul>
<li>
<p>생성자 호출순서</p>
<ol>
<li>자식 클래스 생성시 부모 클래스의 생성자가 먼저 호출된다.</li>
<li>부모 클래스의 생성자는 항상 디폴트 생성자가 호출된다.</li>
<li>부모 클래스의 디폴트 생성자가 없는 경우 자식 클래스 객체를 만들 수 없다.</li>
<li>부모 클래스의 다른 생성자를 호출하려면 자식 클래스 생성자의 초기화 리스트에서 명시해야 한다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Base</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
<span style="color:#75715e">//	Base()      { cout &lt;&lt; &#34;B()&#34;    &lt;&lt; endl; }
</span><span style="color:#75715e"></span>	Base(<span style="color:#66d9ef">int</span> a) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;B(int)&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Base()     { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~B()&#34;</span>   <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Derived</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Base
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Derived()     <span style="color:#f92672">:</span> Base(<span style="color:#ae81ff">0</span>) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;D()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	Derived(<span style="color:#66d9ef">int</span> a)<span style="color:#f92672">:</span> Base(a) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;D(int)&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Derived()     { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~D()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#75715e">//Derived d;
</span><span style="color:#75715e"></span>	Derived d(<span style="color:#ae81ff">5</span>);
}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
<span style="color:#75715e">//	Point()             : x(0), y(0) {}
</span><span style="color:#75715e"></span>	Point(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#f92672">:</span> x(a), y(b) {}
};
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rect</span>
{
	Point p1;
	Point p2;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Rect() <span style="color:#f92672">:</span> p1(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>), p2(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>) <span style="color:#75715e">//: p1(), p2()
</span><span style="color:#75715e"></span>	{
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Rect r; <span style="color:#75715e">// 순서 p1 생성자 -&gt; p2 생성자 -&gt; Rect 생성자
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>멤버를 가지고 있는 상속관계 생성자 호출 순서</p>
<ol>
<li>부모 클래스 멤버의 생성자</li>
<li>부모 클래스의 생성자</li>
<li>자식 클래스 멤버의 생성자</li>
<li>자식 클래스의 생성자</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">BM</span> { BM() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;BM()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; } };
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">DM</span> { DM() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;DM()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; } };

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Base</span>
{
	BM bm;
	<span style="color:#66d9ef">int</span> x;
	Base() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Base()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Derived</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Base
{
	DM dm;
	<span style="color:#66d9ef">int</span> y;
	Derived() <span style="color:#f92672">:</span> dm(), Base()
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Derived()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; 
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Derived d; <span style="color:#75715e">// BM() -&gt; Base() -&gt; DM() -&gt; Derived()
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>생성자 호출순서 관련 주의사항</p>
<ul>
<li><code>mystream(int sz) : buf(sz), stream(buf) {}</code>이렇게 buf를 초기화 하는 것으로 표현 해도 절대적 초기화 순서에 의해 버그가 발생함</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">stream_buf</span>
{
	stream_buf(size_t sz) 
	{ 
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;stream_buf&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; 
	}
};
<span style="color:#75715e">// 생성자로 버퍼를 받는 객체
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">stream</span>
{
	stream(stream_buf<span style="color:#f92672">&amp;</span> buf) 
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;stream : using stream_buf&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; 
	}
};

<span style="color:#75715e">// 버퍼를 가지고 있는 객체
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">mystream</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> stream
{
	stream_buf buf;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	mystream(<span style="color:#66d9ef">int</span> sz) <span style="color:#f92672">:</span> buf(sz), stream(buf) {}
};


<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
<span style="color:#75715e">//	stream_buf buf(1024);
</span><span style="color:#75715e">//	stream st(buf);
</span><span style="color:#75715e"></span>
	mystream mst(<span style="color:#ae81ff">1024</span>);
}
</code></pre></div><ul>
<li>
<p>해결 방법, 관리 클래스 만들고 다중상속을 이용해서 초기화 순서를 제어 (cpp 표준 스트림에서 사용 방식)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">stream_buf</span>
{
	stream_buf(size_t sz)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;stream_buf&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};
<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">stream</span>
{
	stream(stream_buf<span style="color:#f92672">&amp;</span> buf)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;stream : using stream_buf&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">buf_manager</span>
{
<span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
	stream_buf buf;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	buf_manager(size_t sz) <span style="color:#f92672">:</span> buf(sz) {}
};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">mystream</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> buf_manager, <span style="color:#66d9ef">public</span> stream
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	mystream(size_t sz) <span style="color:#f92672">:</span> buf_manager(sz), stream(buf) {}
};


<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	mystream mst(<span style="color:#ae81ff">1024</span>);
}
</code></pre></div></li>
</ul>
</li>
<li>
<p>생성자에서는 가상함수가 동작하지 않음</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#75715e">// 생성자에서는 가상함수가 동작하지 않는다.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Base</span>
{
	Base() { goo(); }

<span style="color:#75715e">//	void foo() { goo(); }
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">goo</span>() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Base::goo&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Derived</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> Base
{
	<span style="color:#66d9ef">int</span> x;

	Derived() <span style="color:#f92672">:</span> x(<span style="color:#ae81ff">10</span>) {}
	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">goo</span>() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Derived::goo&#34;</span> <span style="color:#f92672">&lt;&lt;</span> x <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Derived d; <span style="color:#75715e">// Base::goo
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>생성자와 예외</p>
<ul>
<li>생성자에서 예외가 발생 할 경우 소멸자가 호출되지 않음( 문제 : 메모리 누수 발생 가능 )</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Resource</span>
{
	Resource()  { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;acquire Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Resource() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;release Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
{
	Resource<span style="color:#f92672">*</span> p;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Test() <span style="color:#f92672">:</span> p( <span style="color:#66d9ef">new</span> Resource )
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Test()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
		<span style="color:#66d9ef">throw</span> <span style="color:#ae81ff">1</span>;
	}
	<span style="color:#f92672">~</span>Test()
	{
		<span style="color:#66d9ef">delete</span> p;
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~Test()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">try</span>
	{
		Test t;
	}
	<span style="color:#66d9ef">catch</span> (...)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;예외 발생&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
}
</code></pre></div><ul>
<li>위 문제 해결 방법1 -&gt; 스마트 포인터 사용</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;memory&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Resource</span>
{
	Resource() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;acquire Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Resource() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;release Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
{
<span style="color:#75715e">//	Resource* p;
</span><span style="color:#75715e"></span>	unique_ptr<span style="color:#f92672">&lt;</span>Resource<span style="color:#f92672">&gt;</span> p;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Test() <span style="color:#f92672">:</span> p(<span style="color:#66d9ef">new</span> Resource)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;Test()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
		<span style="color:#66d9ef">throw</span> <span style="color:#ae81ff">1</span>;
	}
	<span style="color:#f92672">~</span>Test()
	{
		<span style="color:#75715e">//delete p;
</span><span style="color:#75715e"></span>		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~Test()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">try</span>
	{
		Test t;
	}
	<span style="color:#66d9ef">catch</span> (...)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;예외 발생&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
}
</code></pre></div><ul>
<li>해결방법 2 -&gt; 예외 가능성이 있는 어떠한 작업도 하지 않음, ex) 자원 할당 전용 함수 구현
장점 : 가상 함수 사용 가능
단점 : 초기화 의미의 함수를 두번 작성해야함</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;memory&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Resource</span>
{
	Resource() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;acquire Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
	<span style="color:#f92672">~</span>Resource() { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;release Resource&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }
};

<span style="color:#75715e">// 해결책 2. two-phase constructor
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
{
	Resource<span style="color:#f92672">*</span> p;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Test() <span style="color:#f92672">:</span> p(<span style="color:#ae81ff">0</span>)
	{
		<span style="color:#75715e">// 예외 가능성이 있는 어떠한 작업도 하지 않는다.
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// 가상함수 호출()
</span><span style="color:#75715e"></span>	}

	<span style="color:#75715e">// 자원 할당 전용함수
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Construct</span>()
	{
		p <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Resource;
		<span style="color:#75715e">//cout &lt;&lt; &#34;Test()&#34; &lt;&lt; endl;
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// 가상함수 호출()
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">throw</span> <span style="color:#ae81ff">1</span>;
	}

	<span style="color:#f92672">~</span>Test()
	{
		<span style="color:#66d9ef">delete</span> p;
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;~Test()&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
};


<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">try</span>
	{
		Test t;
		t.Construct(); <span style="color:#75715e">// 필요한 자원 할당.
</span><span style="color:#75715e"></span>	}
	<span style="color:#66d9ef">catch</span> (...)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;예외 발생&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
	}
}
</code></pre></div></li>
</ul>
<h3 id="trivial">Trivial</h3>
<ul>
<li>
<p>Trivial 개념</p>
<ul>
<li>하는 일이 없는 경우</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;type_traits&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#75715e">//virtual void foo() {} virtual 키워드를 붙일 경우 하는 일이 있는 것으로 봄
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> foo() {}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	cout <span style="color:#f92672">&lt;&lt;</span> is_trivially_constructible<span style="color:#f92672">&lt;</span>A<span style="color:#f92672">&gt;::</span>value <span style="color:#f92672">&lt;&lt;</span> endl;
}
</code></pre></div></li>
<li>
<p>Trivial 활용</p>
<ul>
<li>복사 생성자가 구현되있을 경우와 아닌 경우 처리를 다르게 하고 싶을 때 (객체 생성시 깊은복사, 얕은복사 선택 등)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;type_traits&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">void</span> copy_type(T<span style="color:#f92672">*</span> dst, T<span style="color:#f92672">*</span> arc, <span style="color:#66d9ef">int</span> sz)
{
	<span style="color:#66d9ef">if</span> (is_trivially_copyable<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>value)
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;복사 생성자가 trivial&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
		memcpy(dst, src, <span style="color:#66d9ef">sizeof</span>(T)<span style="color:#f92672">*</span>sz);
	}
	<span style="color:#66d9ef">else</span>
	{
		cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;복사 생성자가 trivial 하지 않은 경우&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl;
		<span style="color:#66d9ef">while</span> (sz<span style="color:#f92672">--</span>)
		{
			<span style="color:#66d9ef">new</span>(dst) T(<span style="color:#f92672">*</span>src);
			<span style="color:#f92672">++</span>dst, <span style="color:#f92672">++</span>src;
		}
	}
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    <span style="color:#66d9ef">char</span> s1[<span style="color:#ae81ff">20</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello world&#34;</span>;
    <span style="color:#66d9ef">char</span> s2[<span style="color:#ae81ff">20</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0</span> };

    copy_type(s1, s2, <span style="color:#ae81ff">20</span>); <span style="color:#75715e">// 모든 타입의 array를 복사하는 함수
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>Trivial로 판단되는 조건 정리</p>
<ul>
<li>virtual 함수가 아니어야 함</li>
<li>생성자가 없거나 구현되 있을 경우 default 키워드를 사용해야 함</li>
<li>객체형 멤버가 없거나, 객체 멤버의 생성자가 trivial 해야 함</li>
<li>상속 관계가 없거나, 부모 클래스의 생성자가 trivial 해야 함</li>
<li>멤버 변수 초기화 문법이 없어야함 ex) int a = 10;</li>
</ul>
</li>
</ul>
<h3 id="conversion">Conversion</h3>
<p>변환 연산자, 변환 생성자, explicit, nullptr 만들기 등</p>
<ul>
<li>
<p>변환연산자 : 사용자 타입 -&gt; 시스템 타입</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point()             <span style="color:#f92672">:</span> x(<span style="color:#ae81ff">0</span>), y(<span style="color:#ae81ff">0</span>) {}
	Point(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#f92672">:</span> x(a), y(b) {}

	<span style="color:#75715e">// 변환 연산자 : 객체를 다른 타입으로 변환할때 호출된다.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// 특징 : 리턴 타입을 표기하지 않는다.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">int</span>()
	{
		<span style="color:#66d9ef">return</span> x;
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">int</span>    n <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
	<span style="color:#66d9ef">double</span> d <span style="color:#f92672">=</span> n; <span style="color:#75715e">// 암시적 형변환 발생.
</span><span style="color:#75715e"></span>
	Point p1(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>);
	n <span style="color:#f92672">=</span> p1;		<span style="color:#75715e">// 객체를 int에 대입할 때, 변환 연산자 필요 p1.operator int()
</span><span style="color:#75715e"></span>
	cout <span style="color:#f92672">&lt;&lt;</span> n <span style="color:#f92672">&lt;&lt;</span> endl; <span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>변환 생성자 : 시스템 타입 -&gt; 사용자 타입</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#75715e">// Point =&gt; int : 변환 연산자   p.operator int()
</span><span style="color:#75715e">// int =&gt; Point : 변환 생성자   Point(int)
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	Point()				<span style="color:#f92672">:</span> x(<span style="color:#ae81ff">0</span>), y(<span style="color:#ae81ff">0</span>) {}
	Point(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#f92672">:</span> x(a), y(b) {}

	<span style="color:#75715e">// 인자가 한개인 생성자 -  변환 생성자
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//							다른 타입이 Point로 변환 되게 한다.
</span><span style="color:#75715e"></span>	Point(<span style="color:#66d9ef">int</span> a) <span style="color:#f92672">:</span> x(a), y(<span style="color:#ae81ff">0</span>) {}

	<span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">int</span>() 	{ <span style="color:#66d9ef">return</span> x; }
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	Point p1;
	Point p2(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>);

	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
	Point p(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>);

	n <span style="color:#f92672">=</span> p; <span style="color:#75715e">// Point =&gt; int   p.operator int()
</span><span style="color:#75715e"></span>	p <span style="color:#f92672">=</span> n; <span style="color:#75715e">// int =&gt; Point   n.operator Point() 가 있으면 된다.
</span><span style="color:#75715e"></span>		   <span style="color:#75715e">//		         하지만, n은 사용자정의 타입이 아니다
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>변환의 장점</p>
<p>사용자 정의 타입을 기존 라이브러리의 필요 파라메터로 전달 할 수 있음</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#75715e">// RAII : Resource Acquision Is Initialization
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OFile</span>
{
	FILE<span style="color:#f92672">*</span> file;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	OFile(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> filename, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> mode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;wt&#34;</span>)
	{
		file <span style="color:#f92672">=</span> fopen(filename, mode);
	}
	<span style="color:#f92672">~</span>OFile() {	fclose(file);	}

	<span style="color:#66d9ef">operator</span> FILE<span style="color:#f92672">*</span>() { <span style="color:#66d9ef">return</span> file; }
};
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	OFile f(<span style="color:#e6db74">&#34;a.txt&#34;</span>);

	<span style="color:#75715e">// C 함수를 사용해서 파일 작업
</span><span style="color:#75715e"></span>	fputs(<span style="color:#e6db74">&#34;hello&#34;</span>, f);
	fprintf(f, <span style="color:#e6db74">&#34;n = %d&#34;</span>, <span style="color:#ae81ff">10</span>);	<span style="color:#75715e">// OFile =&gt; FILE* 로 암시적 변환되면 가능.
</span><span style="color:#75715e"></span>							<span style="color:#75715e">// f.operator FILE*()
</span><span style="color:#75715e"></span>
	String s1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>;
	<span style="color:#66d9ef">char</span> s2[<span style="color:#ae81ff">10</span>];

	strcpy(s2, s1); <span style="color:#75715e">// String =&gt; const char* 암시적 변환..
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>변환의 단점</p>
<ul>
<li>의도하지 않은 변환이 발생되어 버그가 발생 할 수 있음</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">OFile</span>
{
	FILE<span style="color:#f92672">*</span> file;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#75715e">// explicit 생성자 : 인자가 한개인 생성자가 암시적 변환을
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//					허용하는 것을 막는다.
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">explicit</span> OFile(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> filename, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> mode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;wt&#34;</span>)
	{
		file <span style="color:#f92672">=</span> fopen(filename, mode);
	}
	<span style="color:#f92672">~</span>OFile() { fclose(file); }

	<span style="color:#66d9ef">operator</span> FILE<span style="color:#f92672">*</span>() { <span style="color:#66d9ef">return</span> file; }
};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(OFile f) {}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	OFile f(<span style="color:#e6db74">&#34;a.txt&#34;</span>);
	foo(f); <span style="color:#75715e">// ok..
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//foo(&#34;hello&#34;); // const char* =&gt; OFile 로 암시적 변환 발생.
</span><span style="color:#75715e"></span>				  <span style="color:#75715e">// 변환 생성자
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//foo(static_cast&lt;OFile&gt;(&#34;hello&#34;));
</span><span style="color:#75715e"></span>
}
</code></pre></div></li>
<li>
<p>explicit : 암시적 형변환 관련 처리를 제한 시킬 수 있음</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
{
	<span style="color:#66d9ef">int</span> value;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#75715e">// explicit Test(int n) : value(n) {}
</span><span style="color:#75715e"></span>    Test(<span style="color:#66d9ef">int</span> n) <span style="color:#f92672">:</span> value(n) {}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#75715e">// 아래 2줄의 차이점은 ?
</span><span style="color:#75715e"></span>
	Test t1(<span style="color:#ae81ff">5</span>);  <span style="color:#75715e">// 인자가 한개인 생성자 호출
</span><span style="color:#75715e"></span>				 <span style="color:#75715e">// direct initialization
</span><span style="color:#75715e"></span>
	Test t2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>; <span style="color:#75715e">// 1. 변환 생성자를 사용해서 5를 가지고 Test의 임시객체 생성
</span><span style="color:#75715e"></span>				 <span style="color:#75715e">// 2. 임시객체를 복사 생성자를 사용해서 t2에 복사
</span><span style="color:#75715e"></span>				 <span style="color:#75715e">// copy initialization
</span><span style="color:#75715e"></span>				 <span style="color:#75715e">// explicit 키워드를 사용하면 막을 수 있음
</span><span style="color:#75715e"></span>}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;memory&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">String16</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">explicit</span>                    String16(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char16_t</span><span style="color:#f92672">*</span> o);
};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(String16 s)  <span style="color:#75715e">// String16 s = &#34;hello&#34;
</span><span style="color:#75715e"></span>{}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	foo(<span style="color:#e6db74">&#34;hello&#34;</span>); <span style="color:#75715e">// error
</span><span style="color:#75715e"></span>	foo(String16(<span style="color:#e6db74">&#34;hello&#34;</span>)); <span style="color:#75715e">// ok..
</span><span style="color:#75715e"></span>

	String16 s <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>; <span style="color:#75715e">// error
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// STL 의 string 클래스는 생성자가 explicit 가 아님.
</span><span style="color:#75715e"></span>	string s1(<span style="color:#e6db74">&#34;hello&#34;</span>);		<span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>	string s2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span>;	<span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>

	shared_ptr<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> p1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>;	<span style="color:#75715e">// error  생성자가 explicit
</span><span style="color:#75715e"></span>	shared_ptr<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> p2(<span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span>);	<span style="color:#75715e">// ok..
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>nullptr 구현하기</p>
<ul>
<li>0에 관해 살펴보기</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">int</span>   n1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">// error.
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">int</span>   n2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> p2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// ok. 0은 정수지만 포인터로 암시적 형변환된다.
</span><span style="color:#75715e"></span>}
</code></pre></div><ul>
<li>전통적인 NULL 정의</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">int</span> n)   { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;int&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> p) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;void*&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">goo</span>(<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> p) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;goo&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	foo(<span style="color:#ae81ff">0</span>);			<span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>	foo((<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span>)<span style="color:#ae81ff">0</span>);	<span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#ifdef __cplusplus
</span><span style="color:#75715e"></span>	<span style="color:#75715e">#define NULL	0
</span><span style="color:#75715e">#else
</span><span style="color:#75715e"></span>	<span style="color:#75715e">#define NULL (void*)0
</span><span style="color:#75715e">#endif
</span><span style="color:#75715e"></span>
	foo(NULL);		<span style="color:#75715e">// 2
</span><span style="color:#75715e"></span>
	goo(NULL);	<span style="color:#75715e">// void* =&gt; char* 로의 암시적 변환 필요.
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// C   : ok
</span><span style="color:#75715e"></span>				<span style="color:#75715e">// C++ : 암시적 변환 안됨.
</span><span style="color:#75715e"></span>}
</code></pre></div><ul>
<li>전통적인 c++에서의 문제점 : 정수 0은 있으나, 포인터 0이 없음</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">int</span> n)   { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;int&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(<span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> p) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;void*&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 2
</span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">goo</span>(<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> p) { cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;goo&#34;</span> <span style="color:#f92672">&lt;&lt;</span> endl; }	<span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">xnullptr_t</span>
{
	<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
	<span style="color:#66d9ef">operator</span> T<span style="color:#f92672">*</span>() { <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>; }
};
xnullptr_t xnullptr; <span style="color:#75715e">// 포인터 0
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// C++ 11: xnullptr == nullptr
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	foo(<span style="color:#ae81ff">0</span>);			<span style="color:#75715e">// 1
</span><span style="color:#75715e"></span>	foo(xnullptr);	<span style="color:#75715e">// 2. xnullptr_t =&gt; void* 로의 암시적 변환 필요..
</span><span style="color:#75715e"></span>					<span style="color:#75715e">//    xnullptr.operator void*()
</span><span style="color:#75715e"></span>	goo(xnullptr);  <span style="color:#75715e">// 3 goo
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
	<span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> xnullptr;

	<span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> p2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>; <span style="color:#75715e">// C++11 의 포인터 0
</span><span style="color:#75715e"></span>
	nullptr_t a <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>;

	<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span> p <span style="color:#f92672">=</span> a;
}
</code></pre></div></li>
<li>
<p>Return type resolver
좌변의 타입을 보고 우변의 리턴값을 결정 하는 방법</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdlib&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">memAlloc</span>
{
	<span style="color:#66d9ef">int</span> size;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">inline</span> memAlloc(<span style="color:#66d9ef">int</span> sz) <span style="color:#f92672">:</span> size(sz) {}

	<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">operator</span> T<span style="color:#f92672">*</span>()
	{
		<span style="color:#66d9ef">return</span> (T<span style="color:#f92672">*</span>)malloc(size);
	}
};

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">double</span><span style="color:#f92672">*</span> p1 <span style="color:#f92672">=</span> memAlloc(<span style="color:#ae81ff">40</span>); <span style="color:#75715e">// 클래스이름() : 임시객체, 함수가 아님
</span><span style="color:#75715e"></span>							   <span style="color:#75715e">// 임시객체.operator double*()
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span><span style="color:#f92672">*</span>    p2 <span style="color:#f92672">=</span> memAlloc(<span style="color:#ae81ff">40</span>);

}
</code></pre></div></li>
<li>
<p>Safe bool : 객체를 조건문에 넣을 때 operator bool()로 암시적 형변환이 시도됨</p>
<p>방법 1. bool 로 변환 - 단점. shift  연산이 허용된다.</p>
<blockquote>
<p>operator bool() { return fail() ? false : true; }</p>
</blockquote>
<p>방법 2. void* 로의 변환 - C++ 98/03</p>
<blockquote>
<p>operator void*() { return fail() ? 0 : this; }</p>
</blockquote>
<p>방법 3. 함수 포인터로의 변환.</p>
<blockquote>
<p>typedef void(*F)();
operator F() { return fail() ? 0 : &amp;true_function; }</p>
</blockquote>
<p>방법 4. 멤버 함수 포인터로의 변환. -&gt; Safe BOOL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">true_function</span>() {}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">istream</span>   <span style="color:#75715e">// basic_istream
</span><span style="color:#75715e"></span>{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">bool</span> fail() { <span style="color:#66d9ef">return</span> false; }

	<span style="color:#75715e">// 방법 1. bool 로 변환 - 단점. shift  연산이 허용된다.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//operator bool() { return fail() ? false : true; }
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// 방법 2. void* 로의 변환 - C++ 98/03
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// operator void*() { return fail() ? 0 : this; }
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// 방법 3. 함수 포인터로의 변환.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//typedef void(*F)();
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//operator F() { return fail() ? 0 : &amp;true_function; }
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">// 방법 4. 멤버 함수 포인터로의 변환. - Safe BOOL
</span><span style="color:#75715e"></span>	<span style="color:#75715e">//          if() 문에 넣을수 있는 side effect가 가장 적다..
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Dummy</span>
	{
		<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">true_function</span>() {}
	};
	<span style="color:#66d9ef">typedef</span> <span style="color:#a6e22e">void</span>(Dummy<span style="color:#f92672">::*</span>F)();
	<span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">F</span>() { <span style="color:#66d9ef">return</span> fail() <span style="color:#f92672">?</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">:</span> <span style="color:#f92672">&amp;</span>Dummy<span style="color:#f92672">::</span>true_function; }

};
istream cin;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
	<span style="color:#66d9ef">if</span> ( cin ) {}
<span style="color:#75715e">//	cin &lt;&lt; n;
</span><span style="color:#75715e">//	delete cin;
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//	void(*f)() = cin;
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>Explicit Conversion Operator (safe bool을 간결하게 구현 가능)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">istream</span>
{
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">bool</span> fail() { <span style="color:#66d9ef">return</span> false; }

	<span style="color:#75715e">// C++11 부터는 변환 연산자 앞에도 explicit를 붙일수 있다.
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// 암시적 변환은 error. 명시적 허용
</span><span style="color:#75715e"></span>	<span style="color:#75715e">// if 문안에 객체를 넣을수도 있다.
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">explicit</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">bool</span>() { <span style="color:#66d9ef">return</span> fail() <span style="color:#f92672">?</span> false <span style="color:#f92672">:</span> true; }
};
istream cin;

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	<span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

	<span style="color:#75715e">//bool b = cin; //error
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">bool</span> b <span style="color:#f92672">=</span> <span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">bool</span> <span style="color:#f92672">&gt;</span> (cin); <span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>
	<span style="color:#75715e">//cin &lt;&lt; n; // error
</span><span style="color:#75715e"></span>
	<span style="color:#66d9ef">if</span> ( cin ) {}  <span style="color:#75715e">// ok
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> ( cin <span style="color:#f92672">==</span> false ) {}<span style="color:#75715e">// error
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
<li>
<p>Brace-init(일관된 초기화)과 변환</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span>
{
	<span style="color:#66d9ef">int</span> x, y;
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">explicit</span> Point(<span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) <span style="color:#f92672">:</span> x(a), y(b) {}
};

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">foo</span>(Point p) {}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
	foo({ <span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span> }); <span style="color:#75715e">// error, explicit으로 인해
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//	Point p1(1, 1);
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//	Point p2{ 1, 1 };	// direct initialize (직접 초기화)
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//	Point p3 = { 1, 1 };// copy initialize. error (변환 생성 사용, explicit로 인해 error)
</span><span style="color:#75715e"></span>}
</code></pre></div></li>
</ul>
<p><a href="https://en.cppreference.com/w/">더 많은 C++ 관련 정보</a></p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://ence2.github.io/tags/c&#43;&#43;/">C&#43;&#43;</a>

  <a class="tag tag--primary tag--small" href="https://ence2.github.io/tags/modern-c&#43;&#43;/">Modern C&#43;&#43;</a>

  <a class="tag tag--primary tag--small" href="https://ence2.github.io/tags/c&#43;&#43;-advanced/">C&#43;&#43; Advanced</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-11-14-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%953/" data-tooltip="C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 11 14 기본 문법[3]">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-%EA%B0%9C%EC%9A%941/" data-tooltip="C&#43;&#43; 고급 문법 테크닉 - 개요[1]">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 JhChoi. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-11-14-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%953/" data-tooltip="C&#43;&#43; 고급 문법 테크닉 - C&#43;&#43; 11 14 기본 문법[3]">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-%EA%B0%9C%EC%9A%941/" data-tooltip="C&#43;&#43; 고급 문법 테크닉 - 개요[1]">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://ence2.github.io/2021/04/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fence2.github.io%2F2021%2F04%2Fc-%25EA%25B3%25A0%25EA%25B8%2589-%25EB%25AC%25B8%25EB%25B2%2595-%25ED%2585%258C%25ED%2581%25AC%25EB%258B%2589-c-%25EC%25A4%2591%25EC%259A%2594-%25EA%25B8%25B0%25EB%25B3%25B8-%25EB%25AC%25B8%25EB%25B2%2595-%25EB%258B%25A4%25EC%258B%259C%25EB%25B3%25B4%25EA%25B8%25B02%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fence2.github.io%2F2021%2F04%2Fc-%25EA%25B3%25A0%25EA%25B8%2589-%25EB%25AC%25B8%25EB%25B2%2595-%25ED%2585%258C%25ED%2581%25AC%25EB%258B%2589-c-%25EC%25A4%2591%25EC%259A%2594-%25EA%25B8%25B0%25EB%25B3%25B8-%25EB%25AC%25B8%25EB%25B2%2595-%25EB%258B%25A4%25EC%258B%259C%25EB%25B3%25B4%25EA%25B8%25B02%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2Fence2.github.io%2F2021%2F04%2Fc-%25EA%25B3%25A0%25EA%25B8%2589-%25EB%25AC%25B8%25EB%25B2%2595-%25ED%2585%258C%25ED%2581%25AC%25EB%258B%2589-c-%25EC%25A4%2591%25EC%259A%2594-%25EA%25B8%25B0%25EB%25B3%25B8-%25EB%25AC%25B8%25EB%25B2%2595-%25EB%258B%25A4%25EC%258B%259C%25EB%25B3%25B4%25EA%25B8%25B02%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://avatars1.githubusercontent.com/u/53330253?s=460&amp;u=0f3d9c64f695413f8d31da697df4b8e2f77a2ef1&amp;v=4" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Developing life</h4>
    
      <div id="about-card-bio">다시 보기 위한 공간입니다.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Game Developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        South Korea
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://ence2.github.io/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://ence2.github.io/js/script-cs3dg32dbvpminyyazkkqhrzxpbqj1rq9shogay7ajhhibfcghlcs7u1wqfo.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/ence2.github.io\/2021\/04\/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02\/';
          
            this.page.identifier = '\/2021\/04\/c-%EA%B3%A0%EA%B8%89-%EB%AC%B8%EB%B2%95-%ED%85%8C%ED%81%AC%EB%8B%89-c-%EC%A4%91%EC%9A%94-%EA%B8%B0%EB%B3%B8-%EB%AC%B8%EB%B2%95-%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B02\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'ence2-github-io';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2434286165145936"
     crossorigin="anonymous"></script>
  </body>
</html>

